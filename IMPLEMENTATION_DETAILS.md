# üîß –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –∞–¥—Ä–µ—Å–∞

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. **–ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "Address doesn't match your team"
- –ö–Ω–æ–ø–∫–∏: "Transfer to Buffer", "Transfer Order", "Close"
- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —É—Å–ø–µ—Ö–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

### 2. **–ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–¥–∞—Ç—å –∑–∞–∫–∞–∑" –≤–º–µ—Å—Ç–æ "–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑"**
- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ "Transfer Order"
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∞ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

### 3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –±—É—Ñ–µ—Ä**
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Transfer Order" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–∫–∞–∑
- –ó–∞–∫–∞–∑ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –∫–æ–º–∞–Ω–¥—ã `nearest_team`
- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è "–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω"

### 4. **–ü–µ—Ä–µ–±—Ä–æ—Å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É myOrders**
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ `/myOrders`
- –¢–∞–º –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞—è–≤–∫—É –≤ –±—É—Ñ–µ—Ä–µ

### 5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞**
- –ö–Ω–æ–ø–∫–∞ "Transfer Order" –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –±–µ–∑ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ "(Phone required)" –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞

### 6. **–°—Ç–∞—Ç—É—Å "–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω"**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ API –∫–∞–∫ `text_status: '–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω'`

### 7. **–°–±—Ä–æ—Å –≥–ª–æ–±—É—Å–∞ –ø—Ä–∏ —Å–±—Ä–æ—Å–µ —Ñ–æ—Ä–º—ã**
- –ì–ª–æ–±—É—Å –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ –∏—Å—á–µ–∑–∞–µ—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Reset Form
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –ø–æ–ª—è –∞–¥—Ä–µ—Å–∞
- –°–±—Ä–æ—Å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞
- –°–±—Ä–æ—Å –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞ —Å –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è

## üîÑ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ï—Å—Ç—å —Ç–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å ‚Üí `fit: false`
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "Transfer to Buffer"
3. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∑–∞–∫–∞–∑ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –∫–æ–º–∞–Ω–¥—ã `nearest_team`
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ù–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–∫–∞–∑–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å ‚Üí `fit: false`
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "Transfer Order"
3. –ï—Å–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω:
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑
   - –°—Ç–∞—Ç—É—Å: "–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω"
   - –ó–∞–∫–∞–∑ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –∫–æ–º–∞–Ω–¥—ã `nearest_team`
   - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É myOrders
4. –ï—Å–ª–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω:
   - –ö–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ "(Phone required)"

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Store –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```typescript
// –ù–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
addressFitNotification: {
    isVisible: boolean;
    message: string;
    nearestTeam: string;
    address: string;
    orderId?: string;
    phoneNumber?: string; // –ù–æ–≤–æ–µ –ø–æ–ª–µ
} | null;

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
showAddressFitNotification(message, nearestTeam, address, orderId?, phoneNumber?)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≥–ª–æ–±—É—Å–∞
```typescript
// –í resetForm()
addressFitNotification: null

// –í CustomerInfo useEffect
useOrderStore.subscribe((state) => state.formData, (newFormData, prevFormData) => {
    if (prevFormData.address && !newFormData.address) {
        setDetectedAddress(null);
    }
});
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞
```typescript
const handleCreateAndTransferOrder = async () => {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    if (!formData.phoneNumber) return;
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–æ—Ä–æ–¥–∞ –∏ ZIP
    const addressData = await getCorrectCity(formData.address);
    
    if (addressData && addressData.address_data) {
        // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥ –∏ ZIP –∫–æ–¥, –∞–¥—Ä–µ—Å –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π
        updateFormData('city', addressData.address_data.data.city);
        updateFormData('zipCode', addressData.address_data.data.postcode || '');
        updateFormData('teamId', addressFitNotification.nearestTeam);
        updateFormData('text_status', '–î—Ä—É–≥–æ–π —Ä–µ–≥–∏–æ–Ω');
        
        // –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        const newOrder = await createOrder();
        
        // –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –±—É—Ñ–µ—Ä
        await transferOrderToBuffer(newOrder._id, addressFitNotification.nearestTeam);
        
        // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ myOrders
        router.push('/myOrders');
    }
};
```

## üéØ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- **–ñ–µ–ª—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏
- **–ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞** - –∫–æ–≥–¥–∞ –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- **–ü–æ–¥—Å–∫–∞–∑–∫–∞ "(Phone required)"** - –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- **–°–ø–∏–Ω–Ω–µ—Ä** - –≤–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è/–ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥—Ä–µ—Å–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –±—É—Ñ–µ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ myOrders
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –≥–ª–æ–±—É—Å–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –∞–¥—Ä–µ—Å–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
- –ü–æ–∫–∞–∑ –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –° —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π
- **Store**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Zustand store
- **API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `createOrder` –∏ `transferOrderToBuffer`
- **–ë—É—Ñ–µ—Ä**: –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –±—É—Ñ–µ—Ä–∞
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Next.js router
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å react-hot-toast

### WebSocket
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö –≤ –±—É—Ñ–µ—Ä–µ

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
1. **–í–≤–æ–¥ –∞–¥—Ä–µ—Å–∞ —Å `fit: false`** ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
2. **–°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã** ‚Üí –≥–ª–æ–±—É—Å –∏—Å—á–µ–∑–∞–µ—Ç
3. **–ü–µ—Ä–µ–¥–∞—á–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∑–∞–∫–∞–∑–∞** ‚Üí –∑–∞–∫–∞–∑ –≤ –±—É—Ñ–µ—Ä–µ
4. **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∑–∞–∫–∞–∑–∞** ‚Üí –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è
5. **–ë–µ–∑ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞** ‚Üí –∫–Ω–æ–ø–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
6. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ myOrders** ‚Üí –∑–∞–∫–∞–∑ –≤–∏–¥–µ–Ω –≤ –±—É—Ñ–µ—Ä–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
- ‚úÖ TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Next.js —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
