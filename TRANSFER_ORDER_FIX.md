# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "–∑–∞–∫–∞–∑ —Å —Ç–∞–∫–∏–º leadId –Ω–µ –±—ã–ª –Ω–∞–π–¥–µ–Ω"

## üö® **–ü—Ä–æ–±–ª–µ–º–∞**

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ–¥–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑ –≤ –±—É—Ñ–µ—Ä –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:
```
"–∑–∞–∫–∞–∑ —Å —Ç–∞–∫–∏–º leadId –Ω–µ –±—ã–ª –Ω–∞–π–¥–µ–Ω"
```

## üîç **–ü—Ä–∏—á–∏–Ω–∞**

–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –≤ –∑–∞–ø—Ä–æ—Å `transfer-order` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `leadId=undefined`:
```
transfer-order/?leadId=undefined&toTeam=A&at=...
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ:
1. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (—Å—Ç–∞—Ç—É—Å 201)
2. –ù–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–≥–æ –≤ –±—É—Ñ–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID
3. API –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∑–∞–∫–∞–∑ —Å `undefined` ID

## üõ† **–†–µ—à–µ–Ω–∏–µ**

### 1. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è ID –∑–∞–∫–∞–∑–∞**

```typescript
// –ü–æ–ª—É—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –∑–∞–∫–∞–∑–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏
const orderId = newOrder.leadId || newOrder._id || newOrder.order_id;

if (!orderId) {
    console.error('Order created but no ID found:', newOrder);
    toast.error('Order created but failed to get ID for transfer');
    return;
}
```

### 2. **–í–∞–ª–∏–¥–∞—Ü–∏—è ID –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π**

```typescript
if (!orderId || orderId === 'undefined') {
    console.error('Invalid orderId:', orderId);
    set({ bufferError: '–ù–µ–≤–µ—Ä–Ω—ã–π ID –∑–∞–∫–∞–∑–∞' });
    return false;
}
```

### 3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**

```typescript
console.log('üîç API response for createOrder:', createdOrder);
console.log('üîç Order ID fields:', {
    leadId: createdOrder.leadId,
    _id: createdOrder._id,
    order_id: createdOrder.order_id
});

console.log(`üîÑ –ü–µ—Ä–µ–¥–∞–µ–º –∑–∞–∫–∞–∑ ${orderId} –≤ –∫–æ–º–∞–Ω–¥—É ${targetTeam}`);
```

## üîÑ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–∫–∞–∑ ‚Üí API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 201
2. –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –±—É—Ñ–µ—Ä —Å `undefined` ID ‚Üí –æ—à–∏–±–∫–∞ 404

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–∫–∞–∑ ‚Üí API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 201
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ ID –≤ –æ—Ç–≤–µ—Ç–µ
3. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID: `leadId` ‚Üí `_id` ‚Üí `order_id`
4. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è ID –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π
5. –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –±—É—Ñ–µ—Ä —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º ID ‚Üí —É—Å–ø–µ—Ö

## üìù **–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ ID**

```typescript
const orderId = newOrder.leadId || newOrder._id || newOrder.order_id;
```

1. **`leadId`** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–∫–∞–∑–∞
2. **`_id`** - MongoDB ID (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. **`order_id`** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π ID (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

### **–¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞**
- ‚úÖ –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω—ã –≤—Å–µ ID –ø–æ–ª—è
- ‚úÖ –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID

### **–¢–µ—Å—Ç 2: –ü–µ—Ä–µ–¥–∞—á–∞ –≤ –±—É—Ñ–µ—Ä**
- ‚úÖ ID –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π
- ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID
- ‚úÖ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±—É—Ñ–µ—Ä

### **–¢–µ—Å—Ç 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –ï—Å–ª–∏ ID –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
- ‚úÖ –ï—Å–ª–∏ ID = 'undefined' - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –≤ –æ—Ç–ª–∞–¥–∫–µ

## üöÄ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç ID –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –±—É—Ñ–µ—Ä
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é





